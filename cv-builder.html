const expDiv = document.getElementById("experience");
const eduDiv = document.getElementById("education");
const skillsDiv = document.getElementById("skills");

function addExperience(){
  expDiv.innerHTML += `
    <input placeholder="Company & Role">
    <textarea placeholder="Responsibilities"></textarea>
  `;
}

function addEducation(){
  eduDiv.innerHTML += `
    <input placeholder="Degree & Institution">
    <input placeholder="Year">
  `;
}

function addSkill(){
  const skill = document.getElementById("skillInput").value;
  if(!skill) return;
  skillsDiv.innerHTML += `<span class="skill">${skill}</span>`;
  document.getElementById("skillInput").value = "";
  renderPreview();
}

document.querySelectorAll("input, textarea").forEach(el=>{
  el.addEventListener("input", renderPreview);
});

document.getElementById("photo").addEventListener("change", e=>{
  const reader = new FileReader();
  reader.onload = () => document.getElementById("photoPreview").src = reader.result;
  reader.readAsDataURL(e.target.files[0]);
});

function renderPreview(){
  pName.innerText = name.value;
  pTitle.innerText = title.value;
  pContact.innerText = `${email.value} | ${phone.value} | ${location.value}`;
  pSummary.innerText = summary.value;

  pExperience.innerHTML = expDiv.innerHTML;
  pEducation.innerHTML = eduDiv.innerHTML;
  pSkills.innerHTML = skillsDiv.innerHTML;
}

function generatePDF(){
  html2pdf().from(document.getElementById("cvPreview")).save("My_CV.pdf");
}
