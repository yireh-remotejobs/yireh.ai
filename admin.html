<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin – Job Approvals | Yireh</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="styles.css">
</head>

<body>

<header class="header">
  <div class="brand">
    <img src="logo.png" height="45">
    <b>Yireh Admin</b>
  </div>

  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="jobs.html">Jobs</a>
    <a href="admin.html" class="active">Admin</a>
  </nav>
</header>

<section class="container">
  <h2>Pending Job Approvals</h2>
  <p class="small">Approve only genuine jobs.</p>

  <div id="adminJobs" class="cards"></div>
</section>

<footer class="footer">
© 2025 Yireh.site • Admin Panel
</footer>

<script>
const jobs = JSON.parse(localStorage.getItem("yirehJobs") || "[]");
const box = document.getElementById("adminJobs");

if (jobs.length === 0) {
  box.innerHTML = "<p>No jobs submitted yet.</p>";
}

jobs.forEach((job, i) => {
  const card = document.createElement("div");
  card.className = "card";

  card.innerHTML = `
    <h3>${job.title}</h3>
    <p><b>Company:</b> ${job.company}</p>
    <p><b>Email:</b> ${job.email}</p>
    <p><b>Status:</b> ${job.approved ? "Approved" : "Pending"}</p>

    <button class="btn" onclick="approve(${i})">Approve</button>
    <button class="btn ghost" onclick="removeJob(${i})">Reject</button>
  `;

  box.appendChild(card);
});

function approve(i) {
  jobs[i].approved = true;
  localStorage.setItem("yirehJobs", JSON.stringify(jobs));
  location.reload();
}

function removeJob(i) {
  if (!confirm("Delete this job?")) return;
  jobs.splice(i, 1);
  localStorage.setItem("yirehJobs", JSON.stringify(jobs));
  location.reload();
}
</script>

</body>
</html>
