<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel â€“ Yireh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="styles.css">
</head>

<body>

<!-- HEADER -->
<header class="header">
  <div class="brand">
    <img src="logo.png" height="50">
    <div>
      <h2>Yireh Admin</h2>
      <small>Job Approval Panel</small>
    </div>
  </div>

  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="jobs.html">Jobs</a>
    <a href="admin.html" class="active">Admin</a>
  </nav>
</header>

<!-- MAIN -->
<section class="container">
  <h2>Pending Job Approvals</h2>
  <p class="small">
    Review jobs carefully. Approve only legitimate postings.
  </p>

  <div id="adminJobs" class="cards"></div>

  <div id="noJobs" class="card small" style="display:none">
    No pending jobs ðŸŽ‰
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  Â© 2025 Yireh.site â€¢ Admin Panel
</footer>

<!-- SCRIPT -->
<script>
const jobs = JSON.parse(localStorage.getItem("yirehJobs") || "[]");
const container = document.getElementById("adminJobs");
const empty = document.getElementById("noJobs");

const pending = jobs.filter(j => j.approved === false);

if (pending.length === 0) {
  empty.style.display = "block";
}

pending.forEach((job, index) => {
  const card = document.createElement("div");
  card.className = "card";

  card.innerHTML = `
    <h3>${job.title}</h3>
    <p class="small">
      <b>Company:</b> ${job.company}<br>
      <b>Email:</b> ${job.email}<br>
      <b>Location:</b> ${job.location}<br>
      <b>Type:</b> ${job.type}
    </p>

    <details>
      <summary>View Description</summary>
      <div class="small">${job.jd}</div>
    </details>

    <div class="hero-actions">
      <button class="btn" onclick="approve(${index})">Approve</button>
      <button class="btn ghost" onclick="reject(${index})">Reject</button>
    </div>
  `;

  container.appendChild(card);
});

function approve(i) {
  const all = JSON.parse(localStorage.getItem("yirehJobs") || "[]");
  const job = all.filter(j => j.approved === false)[i];

  const realIndex = all.indexOf(job);
  all[realIndex].approved = true;

  localStorage.setItem("yirehJobs", JSON.stringify(all));
  alert("Job approved");
  location.reload();
}

function reject(i) {
  if (!confirm("Reject and delete this job?")) return;

  let all = JSON.parse(localStorage.getItem("yirehJobs") || "[]");
  const job = all.filter(j => j.approved === false)[i];

  all = all.filter(j => j !== job);
  localStorage.setItem("yirehJobs", JSON.stringify(all));

  alert("Job rejected");
  location.reload();
}
</script>

</body>
</html>
