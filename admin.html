<!DOCTYPE html>
<html>
<head>
  <title>Admin – Job Approval | Yireh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>

<body>

<header class="header">
  <h2>Yireh Admin Panel</h2>
</header>

<section class="container">
  <div class="card">
    <h3>Pending Jobs</h3>
    <div id="pendingJobs"></div>
  </div>
</section>

<script>
const jobs = JSON.parse(localStorage.getItem("yirehJobs") || "[]");
const pendingDiv = document.getElementById("pendingJobs");

function save(jobs){
  localStorage.setItem("yirehJobs", JSON.stringify(jobs));
}

function approve(i){
  jobs[i].approved = true;
  save(jobs);
  location.reload();
}

function reject(i){
  jobs.splice(i,1);
  save(jobs);
  location.reload();
}

if(jobs.length === 0){
  pendingDiv.innerHTML = "<p>No pending jobs</p>";
}

jobs.forEach((job,i)=>{
  if(!job.approved){
    pendingDiv.innerHTML += `
      <div class="card">
        <h4>${job.title}</h4>
        <p><b>${job.company}</b> – ${job.location}</p>
        <p>${job.email}</p>
        <button class="btn" onclick="approve(${i})">Approve</button>
        <button class="btn ghost" onclick="reject(${i})">Reject</button>
      </div>
    `;
  }
});
</script>

</body>
</html>
